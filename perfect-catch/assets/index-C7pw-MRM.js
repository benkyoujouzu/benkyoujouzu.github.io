(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();const mt=!1,St=(e,t)=>e===t,Ae={equals:St};let We=tt;const oe=1,Ee=2,Xe={owned:null,cleanups:null,context:null,owner:null};var E=null;let Fe=null,xt=null,w=null,A=null,z=null,Be=0;function vt(e,t){const n=w,o=E,r=e.length===0,s=t===void 0?o:t,i=r?Xe:{owned:null,cleanups:null,context:s?s.context:null,owner:s},l=r?e:()=>e(()=>Re(()=>xe(i)));E=i,w=null;try{return ye(l,!0)}finally{w=n,E=o}}function m(e,t){t=t?Object.assign({},Ae,t):Ae;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},o=r=>(typeof r=="function"&&(r=r(n.value)),et(n,r));return[Ze.bind(n),o]}function R(e,t,n){const o=Me(e,t,!1,oe);$e(o)}function He(e,t,n){We=Ot;const o=Me(e,t,!1,oe);o.user=!0,z?z.push(o):$e(o)}function $t(e,t,n){n=n?Object.assign({},Ae,n):Ae;const o=Me(e,t,!0,0);return o.observers=null,o.observerSlots=null,o.comparator=n.equals||void 0,$e(o),Ze.bind(o)}function Re(e){if(w===null)return e();const t=w;w=null;try{return e()}finally{w=t}}function yt(e){He(()=>Re(e))}function Ze(){if(this.sources&&this.state)if(this.state===oe)$e(this);else{const e=A;A=null,ye(()=>Te(this),!1),A=e}if(w){const e=this.observers?this.observers.length:0;w.sources?(w.sources.push(this),w.sourceSlots.push(e)):(w.sources=[this],w.sourceSlots=[e]),this.observers?(this.observers.push(w),this.observerSlots.push(w.sources.length-1)):(this.observers=[w],this.observerSlots=[w.sources.length-1])}return this.value}function et(e,t,n){let o=e.value;return(!e.comparator||!e.comparator(o,t))&&(e.value=t,e.observers&&e.observers.length&&ye(()=>{for(let r=0;r<e.observers.length;r+=1){const s=e.observers[r],i=Fe&&Fe.running;i&&Fe.disposed.has(s),(i?!s.tState:!s.state)&&(s.pure?A.push(s):z.push(s),s.observers&&nt(s)),i||(s.state=oe)}if(A.length>1e6)throw A=[],new Error},!1)),t}function $e(e){if(!e.fn)return;xe(e);const t=Be;wt(e,e.value,t)}function wt(e,t,n){let o;const r=E,s=w;w=E=e;try{o=e.fn(t)}catch(i){return e.pure&&(e.state=oe,e.owned&&e.owned.forEach(xe),e.owned=null),e.updatedAt=n+1,ot(i)}finally{w=s,E=r}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?et(e,o):e.value=o,e.updatedAt=n)}function Me(e,t,n,o=oe,r){const s={fn:e,state:o,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:E,context:E?E.context:null,pure:n};return E===null||E!==Xe&&(E.owned?E.owned.push(s):E.owned=[s]),s}function Ce(e){if(e.state===0)return;if(e.state===Ee)return Te(e);if(e.suspense&&Re(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<Be);)e.state&&t.push(e);for(let n=t.length-1;n>=0;n--)if(e=t[n],e.state===oe)$e(e);else if(e.state===Ee){const o=A;A=null,ye(()=>Te(e,t[0]),!1),A=o}}function ye(e,t){if(A)return e();let n=!1;t||(A=[]),z?n=!0:z=[],Be++;try{const o=e();return _t(n),o}catch(o){n||(z=null),A=null,ot(o)}}function _t(e){if(A&&(tt(A),A=null),e)return;const t=z;z=null,t.length&&ye(()=>We(t),!1)}function tt(e){for(let t=0;t<e.length;t++)Ce(e[t])}function Ot(e){let t,n=0;for(t=0;t<e.length;t++){const o=e[t];o.user?e[n++]=o:Ce(o)}for(t=0;t<n;t++)Ce(e[t])}function Te(e,t){e.state=0;for(let n=0;n<e.sources.length;n+=1){const o=e.sources[n];if(o.sources){const r=o.state;r===oe?o!==t&&(!o.updatedAt||o.updatedAt<Be)&&Ce(o):r===Ee&&Te(o,t)}}}function nt(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=Ee,n.pure?A.push(n):z.push(n),n.observers&&nt(n))}}function xe(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),o=e.sourceSlots.pop(),r=n.observers;if(r&&r.length){const s=r.pop(),i=n.observerSlots.pop();o<r.length&&(s.sourceSlots[i]=o,r[o]=s,n.observerSlots[o]=i)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)xe(e.tOwned[t]);delete e.tOwned}if(e.owned){for(t=e.owned.length-1;t>=0;t--)xe(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function At(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function ot(e,t=E){throw At(e)}function _e(e,t){return Re(()=>e(t||{}))}const D=e=>$t(()=>e());function Et(e,t,n){let o=n.length,r=t.length,s=o,i=0,l=0,c=t[r-1].nextSibling,a=null;for(;i<r||l<s;){if(t[i]===n[l]){i++,l++;continue}for(;t[r-1]===n[s-1];)r--,s--;if(r===i){const u=s<o?l?n[l-1].nextSibling:n[s-l]:c;for(;l<s;)e.insertBefore(n[l++],u)}else if(s===l)for(;i<r;)(!a||!a.has(t[i]))&&t[i].remove(),i++;else if(t[i]===n[s-1]&&n[l]===t[r-1]){const u=t[--r].nextSibling;e.insertBefore(n[l++],t[i++].nextSibling),e.insertBefore(n[--s],u),t[r]=n[s]}else{if(!a){a=new Map;let b=l;for(;b<s;)a.set(n[b],b++)}const u=a.get(t[i]);if(u!=null)if(l<u&&u<s){let b=i,S=1,g;for(;++b<r&&b<s&&!((g=a.get(t[b]))==null||g!==u+S);)S++;if(S>u-l){const Q=t[i];for(;l<u;)e.insertBefore(n[l++],Q)}else e.replaceChild(n[l++],t[i++])}else i++;else t[i++].remove()}}}const je="_$DX_DELEGATE";function Ct(e,t,n,o={}){let r;return vt(s=>{r=s,t===document?e():f(t,e(),t.firstChild?null:void 0,n)},o.owner),()=>{r(),t.textContent=""}}function C(e,t,n,o){let r;const s=()=>{const l=document.createElement("template");return l.innerHTML=e,l.content.firstChild},i=()=>(r||(r=s())).cloneNode(!0);return i.cloneNode=i,i}function ke(e,t=window.document){const n=t[je]||(t[je]=new Set);for(let o=0,r=e.length;o<r;o++){const s=e[o];n.has(s)||(n.add(s),t.addEventListener(s,Tt))}}function ve(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function v(e,t){t==null?e.removeAttribute("class"):e.className=t}function f(e,t,n,o){if(n!==void 0&&!o&&(o=[]),typeof t!="function")return Ne(e,t,o,n);R(r=>Ne(e,t(),r,n),o)}function Tt(e){let t=e.target;const n=`$$${e.type}`,o=e.target,r=e.currentTarget,s=c=>Object.defineProperty(e,"target",{configurable:!0,value:c}),i=()=>{const c=t[n];if(c&&!t.disabled){const a=t[`${n}Data`];if(a!==void 0?c.call(t,a,e):c.call(t,e),e.cancelBubble)return}return t.host&&typeof t.host!="string"&&!t.host._$host&&t.contains(e.target)&&s(t.host),!0},l=()=>{for(;i()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}}),e.composedPath){const c=e.composedPath();s(c[0]);for(let a=0;a<c.length-2&&(t=c[a],!!i());a++){if(t._$host){t=t._$host,l();break}if(t.parentNode===r)break}}else l();s(o)}function Ne(e,t,n,o,r){for(;typeof n=="function";)n=n();if(t===n)return n;const s=typeof t,i=o!==void 0;if(e=i&&n[0]&&n[0].parentNode||e,s==="string"||s==="number"){if(s==="number"&&(t=t.toString(),t===n))return n;if(i){let l=n[0];l&&l.nodeType===3?l.data!==t&&(l.data=t):l=document.createTextNode(t),n=he(e,n,o,l)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t}else if(t==null||s==="boolean")n=he(e,n,o);else{if(s==="function")return R(()=>{let l=t();for(;typeof l=="function";)l=l();n=Ne(e,l,n,o)}),()=>n;if(Array.isArray(t)){const l=[],c=n&&Array.isArray(n);if(Ge(l,t,n,r))return R(()=>n=Ne(e,l,n,o,!0)),()=>n;if(l.length===0){if(n=he(e,n,o),i)return n}else c?n.length===0?Je(e,l,o):Et(e,n,l):(n&&he(e),Je(e,l));n=l}else if(t.nodeType){if(Array.isArray(n)){if(i)return n=he(e,n,o,t);he(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function Ge(e,t,n,o){let r=!1;for(let s=0,i=t.length;s<i;s++){let l=t[s],c=n&&n[e.length],a;if(!(l==null||l===!0||l===!1))if((a=typeof l)=="object"&&l.nodeType)e.push(l);else if(Array.isArray(l))r=Ge(e,l,c)||r;else if(a==="function")if(o){for(;typeof l=="function";)l=l();r=Ge(e,Array.isArray(l)?l:[l],Array.isArray(c)?c:[c])||r}else e.push(l),r=!0;else{const u=String(l);c&&c.nodeType===3&&c.data===u?e.push(c):e.push(document.createTextNode(u))}}return r}function Je(e,t,n=null){for(let o=0,r=t.length;o<r;o++)e.insertBefore(t[o],n)}function he(e,t,n,o){if(n===void 0)return e.textContent="";const r=o||document.createTextNode("");if(t.length){let s=!1;for(let i=t.length-1;i>=0;i--){const l=t[i];if(r!==l){const c=l.parentNode===e;!s&&!i?c?e.replaceChild(r,l):e.insertBefore(r,n):c&&l.remove()}else s=!0}}else e.insertBefore(r,n);return[r]}const Nt=440;let pe=null;function rt(){if(!pe){const e=window.AudioContext||window.webkitAudioContext;pe=new e}return pe.state==="suspended"&&pe.resume().catch(e=>{console.error("Error resuming AudioContext:",e)}),pe}async function Ke(){const e=rt();if(e.state==="suspended")try{await e.resume()}catch(t){console.error("Error resuming AudioContext:",t)}return e}function Ye(){pe||rt()}const Bt={C:-9,Db:-8,D:-7,Eb:-6,E:-5,F:-4,Gb:-3,G:-2,Ab:-1,A:0,Bb:1,B:2};function Ve(e,t){const o=Bt[e]+12*(t-4);return Nt*Math.pow(2,o/12)}function Rt(e,t,n){const o=1/e,r=Math.floor(n*o),s=Math.floor(n*t),i=.5,l=new Float32Array(s);let c=0;for(let a=0;a<r;a++)l[a]=Math.random()*2-1;for(let a=r;a<s;a++){const u=l[a-r],b=i*u+(1-i)*c;l[a]=b,c=b}return l}async function kt(e,t,n=.5){const o=await Ke(),r=Ve(e,t),s=o.sampleRate,i=Rt(r,n,s),l=o.createBuffer(1,i.length,s);l.getChannelData(0).set(i);const a=o.createBufferSource();a.buffer=l;const u=o.createGain();u.gain.setValueAtTime(.95,o.currentTime),u.gain.linearRampToValueAtTime(0,o.currentTime+n),a.connect(u),u.connect(o.destination);const b=o.currentTime;a.start(b)}const x={SINE:"sine",SQUARE:"square",TRIANGLE:"triangle",SAWTOOTH:"sawtooth",KARPLUS_STRONG:"karplus-strong",SHEPARD:"shepard"};async function lt(e,t,n=.5,o=.8){const r=await Ke(),s=12,i=[],l=r.currentTime,c=r.createGain(),a=1/(s+1);c.gain.setValueAtTime(a,r.currentTime),c.gain.setValueAtTime(a,r.currentTime+n*o),c.gain.linearRampToValueAtTime(0,r.currentTime+n);for(let b=0;b<s;b++){const S=Ve(e,b),g=r.createOscillator();g.type="sine",g.frequency.value=S,g.connect(c),i.push(g)}const u=r.createBiquadFilter();u.type="lowpass",u.frequency.value=5e3,c.connect(u),u.connect(r.destination),i.forEach(b=>{b.start(l),b.stop(l+n)})}async function Oe(e,t,n=.5,o=x.SINE){o===x.KARPLUS_STRONG?await kt(e,t,n):o===x.SHEPARD?await lt(e,t,n):await Dt(e,t,n,o)}async function Dt(e,t,n=.5,o="sine"){const r=await Ke(),s=r.createOscillator(),i=r.createGain(),l=Ve(e,t);s.connect(i),i.connect(r.destination),s.frequency.value=l,s.type=o;const c=r.currentTime;i.gain.setValueAtTime(0,c),i.gain.linearRampToValueAtTime(.3,c+.01),i.gain.linearRampToValueAtTime(0,c+n),s.start(c),s.stop(c+n)}const k=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],De=[2,3,4,5,6];function It(e){return k.indexOf(e)}function Pt(e,t){if(e.size===0||t===0)return[];const o=Array.from(e).map(l=>It(l)).sort((l,c)=>l-c),r=o[0],s=o[o.length-1],i=new Set;for(let l=1;l<=t;l++){const c=r-l;if(c>=0&&c<k.length){const a=k[c];e.has(a)||i.add(a)}}for(let l=1;l<=t;l++){const c=s+l;if(c>=0&&c<k.length){const a=k[c];e.has(a)||i.add(a)}}return Array.from(i)}var Ut=C('<div class=space-y-6><div><div class="grid grid-cols-12 gap-0 border border-blue-200"></div></div><div><div class="grid grid-cols-5 gap-0 border border-blue-200"></div></div><div class="mt-6 p-4 bg-gray-50 rounded-lg space-y-4"><label class="block text-sm font-semibold text-gray-700 mb-3">Tone Type:</label><div class="grid grid-cols-6 gap-2"><button>Sine</button><button>Square</button><button>Triangle</button><button>Sawtooth</button><button>Karplus-Strong</button><button>Shepard</button></div><p class="text-xs text-gray-500 mt-2"></p></div><div class="mt-6 p-4 bg-gray-50 rounded-lg space-y-4"><div class="flex items-center gap-3"><input type=checkbox id=outOfBoundEnabled class="w-5 h-5 text-blue-600 rounded"><label for=outOfBoundEnabled class="text-sm font-semibold text-gray-700">Out-of-Bound Notes</label></div></div><div class="mt-6 p-4 bg-gray-50 rounded-lg"><p class="text-sm text-gray-600"><strong>Selected Notes:</strong> </p><p class="text-sm text-gray-600 mt-2"><strong>Selected Octaves:</strong> '),ze=C("<button>"),Lt=C('<div class="ml-8 space-y-2"><label for=outOfBoundRange class="block text-sm text-gray-600">Out-of-Bound Range: </label><input type=range id=outOfBoundRange min=0 max=11 class=w-full><p class="text-xs text-gray-500">Notes within <!> semitones above/below selected notes will also appear');function Ft({selectedNotes:e,setSelectedNotes:t,selectedOctaves:n,setSelectedOctaves:o,outOfBoundEnabled:r,setOutOfBoundEnabled:s,outOfBoundRange:i,setOutOfBoundRange:l,waveType:c,setWaveType:a}){const u=S=>{const g=new Set(e());g.has(S)?g.delete(S):g.add(S),t(g)},b=S=>{const g=new Set(n());g.has(S)?g.delete(S):g.add(S),o(g)};return(()=>{var S=Ut(),g=S.firstChild,Q=g.firstChild,L=g.nextSibling,me=L.firstChild,j=L.nextSibling,W=j.firstChild,F=W.nextSibling,X=F.firstChild,G=X.nextSibling,H=G.nextSibling,J=H.nextSibling,$=J.nextSibling,I=$.nextSibling,re=F.nextSibling,P=j.nextSibling,le=P.firstChild,O=le.firstChild,ae=P.nextSibling,se=ae.firstChild,Se=se.firstChild;Se.nextSibling;var Z=se.nextSibling,Ie=Z.firstChild;return Ie.nextSibling,f(Q,()=>k.map(d=>(()=>{var y=ze();return y.$$click=()=>u(d),ve(y,"key",d),f(y,d),R(()=>v(y,`p-4 border border-blue-200 transition-all flex items-center justify-center ${e().has(d)?"bg-blue-400 text-white":"bg-white text-blue-600 hover:bg-blue-50"}`)),y})())),f(me,()=>De.map(d=>(()=>{var y=ze();return y.$$click=()=>b(d),ve(y,"key",d),f(y,d),R(()=>v(y,`p-4 text-center border border-blue-200 transition-all ${n().has(d)?"bg-blue-400 text-white":"bg-white text-blue-600 hover:bg-blue-50"}`)),y})())),X.$$click=()=>a(x.SINE),G.$$click=()=>a(x.SQUARE),H.$$click=()=>a(x.TRIANGLE),J.$$click=()=>a(x.SAWTOOTH),$.$$click=()=>a(x.KARPLUS_STRONG),I.$$click=()=>a(x.SHEPARD),f(re,(()=>{var d=D(()=>c()===x.KARPLUS_STRONG);return()=>d()?"Plucked string simulation using Karplus-Strong algorithm":D(()=>c()===x.SHEPARD)()?"Shepard tone: auditory illusion with layered octaves":`${c().charAt(0).toUpperCase()+c().slice(1)} wave oscillator`})()),O.addEventListener("change",d=>s(d.target.checked)),f(P,(()=>{var d=D(()=>!!r());return()=>d()&&(()=>{var y=Lt(),ie=y.firstChild;ie.firstChild;var ee=ie.nextSibling,M=ee.nextSibling,ue=M.firstChild,ce=ue.nextSibling;return ce.nextSibling,f(ie,i,null),ee.$$input=Pe=>l(parseInt(Pe.target.value)),f(M,i,ce),R(()=>ee.value=i()),y})()})(),null),f(se,(()=>{var d=D(()=>e().size>0);return()=>d()?Array.from(e()).join(", "):"None"})(),null),f(Z,(()=>{var d=D(()=>n().size>0);return()=>d()?Array.from(n()).join(", "):"None"})(),null),R(d=>{var y=`p-3 rounded-lg border-2 transition-all text-sm font-semibold ${c()===x.SINE?"bg-blue-500 text-white border-blue-600":"bg-white text-blue-600 border-blue-300 hover:bg-blue-50"}`,ie=`p-3 rounded-lg border-2 transition-all text-sm font-semibold ${c()===x.SQUARE?"bg-blue-500 text-white border-blue-600":"bg-white text-blue-600 border-blue-300 hover:bg-blue-50"}`,ee=`p-3 rounded-lg border-2 transition-all text-sm font-semibold ${c()===x.TRIANGLE?"bg-blue-500 text-white border-blue-600":"bg-white text-blue-600 border-blue-300 hover:bg-blue-50"}`,M=`p-3 rounded-lg border-2 transition-all text-sm font-semibold ${c()===x.SAWTOOTH?"bg-blue-500 text-white border-blue-600":"bg-white text-blue-600 border-blue-300 hover:bg-blue-50"}`,ue=`p-3 rounded-lg border-2 transition-all text-sm font-semibold ${c()===x.KARPLUS_STRONG?"bg-blue-500 text-white border-blue-600":"bg-white text-blue-600 border-blue-300 hover:bg-blue-50"}`,ce=`p-3 rounded-lg border-2 transition-all text-sm font-semibold ${c()===x.SHEPARD?"bg-blue-500 text-white border-blue-600":"bg-white text-blue-600 border-blue-300 hover:bg-blue-50"}`;return y!==d.e&&v(X,d.e=y),ie!==d.t&&v(G,d.t=ie),ee!==d.a&&v(H,d.a=ee),M!==d.o&&v(J,d.o=M),ue!==d.i&&v($,d.i=ue),ce!==d.n&&v(I,d.n=ce),d},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),R(()=>O.checked=r()),S})()}ke(["click","input"]);var Gt=C('<div class=space-y-6><h2 class="text-2xl font-bold text-center text-blue-600 mb-6">CATCH</h2><div><h3 class="text-lg font-semibold mb-3 text-gray-700 text-center">Select the note you heard:</h3><div class="grid grid-cols-12 gap-0 border border-blue-200"></div></div><div class="flex gap-4 justify-center flex-wrap"><button>Play New Note</button><button>Replay</button><button class="px-6 py-3 bg-purple-500 text-white rounded-lg font-semibold hover:bg-purple-600 transition-colors"></button><div class="flex items-center gap-3 px-6 py-3 bg-gray-100 rounded-lg"><label class="text-sm font-semibold text-gray-700">Shepard Sequence:</label><button><span>'),Ht=C('<div class="p-4 bg-yellow-100 text-yellow-800 rounded-lg text-center mb-4"><p class=font-semibold>Please select notes and octaves in PITCH mode first!'),Mt=C("<button>"),Kt=C('<div class="mt-4 flex justify-center"><button>Out-of-Bound'),Vt=C("<div>"),qt=C("<p>✓ Correct! The note was "),jt=C("<p>✗ Incorrect. The note was "),Jt=C('<div class="p-4 bg-gray-50 rounded-lg border-2 border-gray-300"><h4 class="text-lg font-semibold text-gray-700 mb-3 text-center">Statistics</h4><div class="grid grid-cols-3 gap-4 text-center"><div><p class="text-sm text-gray-600">Correct Attempts</p><p class="text-2xl font-bold text-green-600"></p></div><div><p class="text-sm text-gray-600">Total Attempts</p><p class="text-2xl font-bold text-blue-600"></p></div><div><p class="text-sm text-gray-600">Correct Rate</p><p class="text-2xl font-bold text-purple-600">');function Yt({selectedNotes:e,selectedOctaves:t,outOfBoundEnabled:n,outOfBoundRange:o,waveType:r}){const[s,i]=m(null),[l,c]=m(null),[a,u]=m(null),[b,S]=m(null),[g,Q]=m(!1),[L,me]=m(!1),[j,W]=m(null),[F,X]=m(null),[G,H]=m(null),[J,$]=m(!1),[I,re]=m(0),[P,le]=m(0),[O,ae]=m(!0),[se,Se]=m(!1),[Z,Ie]=m(!1),[d,y]=m([]),[ie,ee]=m(0),M=()=>{const h=e().size>0?Array.from(e()):k,T=t().size>0?Array.from(t()):De;if(h.length===0||T.length===0)return;let N=[...h];if(n()&&e().size>0){const te=Pt(e(),o());N=[...h,...te]}const Y=N[Math.floor(Math.random()*N.length)],de=T[Math.floor(Math.random()*T.length)],we=n()&&e().size>0&&!e().has(Y);i(Y),c(de),me(we),u(null),S(null),Q(!1),Se(!1),setTimeout(()=>{Oe(Y,de,1,r()),Q(!0)},100)},ue=h=>{if(!s())return;u(h);const T=h===s();S(T);const N=se();se()||(re(I()+1),T&&le(P()+1),Se(!0)),W(s()),X(h),H(T),$(L()),O()&&l()&&(!T||N)&&setTimeout(()=>{Oe(h,l(),1,r())},100),(T&&!N||!O())&&setTimeout(()=>{M()},100)},ce=()=>{if(!s())return;u("OUT_OF_BOUND");const h=L();S(h),se()||(re(I()+1),h&&le(P()+1),Se(!0)),W(s()),X("OUT_OF_BOUND"),H(h),$(L()),(h||!O())&&setTimeout(()=>{M()},100)},Pe=()=>{s()&&l()&&Oe(s(),l(),1,r())},st=()=>{qe();const h=Math.floor(Math.random()*k.length);ee(h);const T=.3,N=Y=>{if(!Z())return;const de=k[Y%k.length];lt(de,4,T,1);const te=setTimeout(()=>{Z()&&N(Y+1)},T*1e3);y(fe=>[...fe,te])};N(h)},qe=()=>{d().forEach(h=>clearTimeout(h)),y([])},it=()=>{const h=!Z();Ie(h),h?st():qe()};return He(()=>{!s()&&e().size>0&&t().size>0&&M()}),(()=>{var h=Gt(),T=h.firstChild,N=T.nextSibling,Y=N.firstChild,de=Y.nextSibling,we=N.nextSibling,te=we.firstChild,fe=te.nextSibling,Ue=fe.nextSibling,ct=Ue.nextSibling,at=ct.firstChild,Le=at.nextSibling,ut=Le.firstChild;return f(h,(()=>{var p=D(()=>e().size===0||t().size===0);return()=>p()&&Ht()})(),N),f(de,()=>k.map(p=>{const B=a()===p,U=p===s(),_=a()!==null,K=O(),be=K&&_&&U,ge=K&&B;return(()=>{var ne=Mt();return ne.$$click=()=>ue(p),ve(ne,"key",p),f(ne,p),R(()=>v(ne,`p-4 border border-blue-200 transition-all flex items-center justify-center ${be?"bg-green-400 text-white":ge?b()?"bg-green-300 text-white":"bg-red-300 text-white":"bg-white text-blue-600 hover:bg-blue-50"}`)),ne})()})),f(N,(()=>{var p=D(()=>!!n());return()=>p()&&(()=>{var B=Kt(),U=B.firstChild;return U.$$click=ce,R(()=>v(U,`px-6 py-3 rounded-lg font-semibold transition-colors border-2 ${O()&&a()==="OUT_OF_BOUND"?b()?"bg-green-400 text-white border-green-500":"bg-red-300 text-white border-red-400":O()&&L()&&a()!==null?"bg-yellow-200 text-yellow-800 border-yellow-300":"bg-orange-500 text-white border-orange-600 hover:bg-orange-600"}`)),B})()})(),null),te.$$click=M,fe.$$click=Pe,Ue.$$click=()=>ae(!O()),f(Ue,()=>O()?"Hide Feedback":"Show Feedback"),Le.$$click=it,f(h,(()=>{var p=D(()=>!!(O()&&F()!==null));return()=>p()&&(()=>{var B=Vt();return f(B,(()=>{var U=D(()=>!!G());return()=>U()?(()=>{var _=qt();return _.firstChild,f(_,j,null),f(_,()=>J()&&" (Out-of-Bound)",null),_})():(()=>{var _=jt();return _.firstChild,f(_,j,null),f(_,()=>J()?" (Out-of-Bound)":"",null),f(_,(()=>{var K=D(()=>F()!=="OUT_OF_BOUND");return()=>K()&&`, not ${F()}`})(),null),f(_,()=>F()==="OUT_OF_BOUND"&&", not out-of-bound",null),_})()})()),R(()=>v(B,`p-4 rounded-lg text-center font-semibold ${G()?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`)),B})()})(),null),f(h,(()=>{var p=D(()=>!!O());return()=>p()&&(()=>{var B=Jt(),U=B.firstChild,_=U.nextSibling,K=_.firstChild,be=K.firstChild,ge=be.nextSibling,ne=K.nextSibling,dt=ne.firstChild,ft=dt.nextSibling,bt=ne.nextSibling,gt=bt.firstChild,ht=gt.nextSibling;return f(ge,P),f(ft,I),f(ht,(()=>{var pt=D(()=>I()>0);return()=>pt()?`${Math.round(P()/I()*100)}%`:"0%"})()),B})()})(),null),R(p=>{var B=e().size===0||t().size===0,U=`px-6 py-3 rounded-lg font-semibold transition-colors ${e().size===0||t().size===0?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600"}`,_=!s()||!l(),K=`px-6 py-3 rounded-lg font-semibold transition-colors ${!s()||!l()?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gray-500 text-white hover:bg-gray-600"}`,be=`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${Z()?"bg-indigo-500":"bg-gray-300"}`,ge=`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${Z()?"translate-x-6":"translate-x-1"}`;return B!==p.e&&(te.disabled=p.e=B),U!==p.t&&v(te,p.t=U),_!==p.a&&(fe.disabled=p.a=_),K!==p.o&&v(fe,p.o=K),be!==p.i&&v(Le,p.i=be),ge!==p.n&&v(ut,p.n=ge),p},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),h})()}ke(["click"]);var zt=C("<div class=space-y-0>"),Qt=C('<div><div class="grid grid-cols-12 gap-0 border border-blue-200">'),Wt=C('<button class="p-4 border border-blue-200 bg-white text-blue-600 hover:bg-blue-50 active:bg-blue-200 transition-colors flex items-center justify-center">');function Xt({waveType:e}){const t=(n,o)=>{Oe(n,o,.8,e?e():"sine")};return(()=>{var n=zt();return f(n,()=>De.map(o=>(()=>{var r=Qt(),s=r.firstChild;return ve(r,"key",o),f(s,()=>k.map(i=>(()=>{var l=Wt();return l.$$click=()=>t(i,o),ve(l,"key",`${i}-${o}`),f(l,i,null),f(l,o,null),l})())),r})())),n})()}ke(["click"]);var Zt=C('<div class="min-h-screen bg-white p-8"><div class="max-w-6xl mx-auto"><div class=mb-8><div class="flex gap-4 justify-center"><button>PITCH</button><button>CATCH</button><button>KEYBOARD</button></div></div><div class=mt-8><div></div><div></div><div>');const V={PITCH:"pitch",CATCH:"catch",KEYBOARD:"keyboard"},q={SELECTED_NOTES:"perfectCatch_selectedNotes",SELECTED_OCTAVES:"perfectCatch_selectedOctaves",OUT_OF_BOUND_ENABLED:"perfectCatch_outOfBoundEnabled",OUT_OF_BOUND_RANGE:"perfectCatch_outOfBoundRange",WAVE_TYPE:"perfectCatch_waveType"};function en(){try{const e=localStorage.getItem(q.SELECTED_NOTES),t=localStorage.getItem(q.SELECTED_OCTAVES),n=localStorage.getItem(q.OUT_OF_BOUND_ENABLED),o=localStorage.getItem(q.OUT_OF_BOUND_RANGE),r=localStorage.getItem(q.WAVE_TYPE),s=e?new Set(JSON.parse(e).filter(u=>k.includes(u))):new Set,i=t?new Set(JSON.parse(t).filter(u=>De.includes(u))):new Set,l=n!==null?JSON.parse(n):!0,c=o!==null?parseInt(o,10):2,a=r?(()=>{try{const u=JSON.parse(r);return Object.values(x).includes(u)?u:x.SHEPARD}catch{return x.KARPLUS_STRONG}})():x.KARPLUS_STRONG;return{selectedNotes:s,selectedOctaves:i,outOfBoundEnabled:l,outOfBoundRange:c,waveType:a}}catch(e){return console.error("Error loading config from localStorage:",e),{selectedNotes:new Set,selectedOctaves:new Set,outOfBoundEnabled:!0,outOfBoundRange:2,waveType:x.KARPLUS_STRONG}}}function tn(e){try{localStorage.setItem(q.SELECTED_NOTES,JSON.stringify(Array.from(e.selectedNotes))),localStorage.setItem(q.SELECTED_OCTAVES,JSON.stringify(Array.from(e.selectedOctaves))),localStorage.setItem(q.OUT_OF_BOUND_ENABLED,JSON.stringify(e.outOfBoundEnabled)),localStorage.setItem(q.OUT_OF_BOUND_RANGE,JSON.stringify(e.outOfBoundRange)),localStorage.setItem(q.WAVE_TYPE,JSON.stringify(e.waveType))}catch(t){console.error("Error saving config to localStorage:",t)}}function nn(){const e=en(),[t,n]=m(V.PITCH),[o,r]=m(e.selectedNotes),[s,i]=m(e.selectedOctaves),[l,c]=m(e.outOfBoundEnabled),[a,u]=m(e.outOfBoundRange),[b,S]=m(e.waveType);return He(()=>{tn({selectedNotes:o(),selectedOctaves:s(),outOfBoundEnabled:l(),outOfBoundRange:a(),waveType:b()})}),yt(()=>{Ye();const g=()=>{Ye(),document.removeEventListener("click",g),document.removeEventListener("touchstart",g)};document.addEventListener("click",g,{once:!0}),document.addEventListener("touchstart",g,{once:!0})}),(()=>{var g=Zt(),Q=g.firstChild,L=Q.firstChild,me=L.firstChild,j=me.firstChild,W=j.nextSibling,F=W.nextSibling,X=L.nextSibling,G=X.firstChild,H=G.nextSibling,J=H.nextSibling;return j.$$click=()=>n(V.PITCH),W.$$click=()=>n(V.CATCH),F.$$click=()=>n(V.KEYBOARD),f(G,_e(Ft,{selectedNotes:o,setSelectedNotes:r,selectedOctaves:s,setSelectedOctaves:i,outOfBoundEnabled:l,setOutOfBoundEnabled:c,outOfBoundRange:a,setOutOfBoundRange:u,waveType:b,setWaveType:S})),f(H,_e(Yt,{selectedNotes:o,selectedOctaves:s,outOfBoundEnabled:l,outOfBoundRange:a,waveType:b})),f(J,_e(Xt,{waveType:b})),R($=>{var I=`px-8 py-3 font-semibold transition-colors border-b-2 ${t()===V.PITCH?"text-blue-600 border-blue-600":"text-gray-500 border-transparent hover:text-blue-500"}`,re=`px-8 py-3 font-semibold transition-colors border-b-2 ${t()===V.CATCH?"text-blue-600 border-blue-600":"text-gray-500 border-transparent hover:text-blue-500"}`,P=`px-8 py-3 font-semibold transition-colors border-b-2 ${t()===V.KEYBOARD?"text-blue-600 border-blue-600":"text-gray-500 border-transparent hover:text-blue-500"}`,le=t()===V.PITCH?"":"hidden",O=t()===V.CATCH?"":"hidden",ae=t()===V.KEYBOARD?"":"hidden";return I!==$.e&&v(j,$.e=I),re!==$.t&&v(W,$.t=re),P!==$.a&&v(F,$.a=P),le!==$.o&&v(G,$.o=le),O!==$.i&&v(H,$.i=O),ae!==$.n&&v(J,$.n=ae),$},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),g})()}ke(["click"]);const Qe=document.getElementById("root");Qe?Ct(()=>_e(nn,{}),Qe):console.error("Root element not found!");
